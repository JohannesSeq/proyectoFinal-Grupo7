@model QuinxoWebApp.Models.Game
@{
    ViewData["Title"] = "Detalles de Partida";
    var moves = (List<QuinxoWebApp.Models.Move>)ViewBag.Moves;
}

<h1>Detalles de la Partida #@Model.Id</h1>

<p><strong>Modo:</strong> @(Model.Mode == 1 ? "2 jugadores" : "4 jugadores")</p>
<p><strong>Ganador:</strong> @(Model.WinnerPlayer?.Name ?? Model.WinnerTeam)</p>
<p><strong>Duraci√≥n:</strong> @Model.DurationSeconds s</p>

<hr />

<h3>Jugadas</h3>

<input type="range" id="moveSlider" min="0" max="@moves.Count" step="1" value="0" style="width:300px;" />

<p id="moveLabel">Movimiento 0 de @moves.Count</p>

<!-- Tablero -->
<div id="boardReplay" style="
    display:grid;
    grid-template-columns:repeat(5, 80px);
    grid-template-rows:repeat(5, 80px);
    gap:4px;
">
    @for (int r = 0; r < 5; r++)
    {
        for (int c = 0; c < 5; c++)
        {
            <div class="cell-replay"
                 data-row="@r"
                 data-col="@c"
                 style="
                    border:1px solid #444;
                    width:80px;
                    height:80px;
                    display:flex;
                    justify-content:center;
                    align-items:center;
                    background:#eee;
                 ">
                N
            </div>
        }
    }
</div>

<!-- Movimientos para JS -->
<script>
    const MOVES = [
        @foreach (var m in moves)
        {
            @: { move:@m.MoveNumber, player:@m.PlayerId, symbol:"@m.Symbol", from:[@m.FromRow,@m.FromCol], to:[@m.ToRow,@m.ToCol] },
        }
    ];
</script>

<script src="/js/replay.js"></script>
