@{
    ViewData["Title"] = "Nueva Partida";
}

<h1>Nueva Partida</h1>

<form method="post">

    <div>
        <label><input type="radio" name="mode" value="1" checked /> Modo 2 jugadores</label>
        <label><input type="radio" name="mode" value="2" /> Modo 4 jugadores</label>
    </div>

    <div id="playersContainer" style="margin-top:20px;">
        <h3>Jugadores</h3>

        <div id="mode2">
            <input name="players" class="form-control" placeholder="Jugador 1" required />
            <input name="players" class="form-control" placeholder="Jugador 2" required />
        </div>

        <div id="mode4" style="display:none;">
            <input name="players" class="form-control" placeholder="Jugador A1" required />
            <input name="players" class="form-control" placeholder="Jugador B1" required />
            <input name="players" class="form-control" placeholder="Jugador A2" required />
            <input name="players" class="form-control" placeholder="Jugador B2" required />
        </div>

    </div>

    <button class="btn btn-success" type="submit" style="margin-top:20px;">Iniciar partida</button>
</form>

<script>
    const mode2 = document.getElementById("mode2");
    const mode4 = document.getElementById("mode4");

    function switchToMode2() {
        mode2.style.display = "block";
        mode4.style.display = "none";

        mode2.querySelectorAll("input").forEach(i => {
            i.required = true;
            i.disabled = false;
        });

        mode4.querySelectorAll("input").forEach(i => {
            i.required = false;
            i.disabled = true;
        });
    }

    function switchToMode4() {
        mode2.style.display = "none";
        mode4.style.display = "block";

        mode2.querySelectorAll("input").forEach(i => {
            i.required = false;
            i.disabled = true;
        });

        mode4.querySelectorAll("input").forEach(i => {
            i.required = true;
            i.disabled = false;
        });
    }

    document.querySelectorAll("input[name='mode']").forEach(r => {
        r.addEventListener("change", e => {
            if (e.target.value == "1") switchToMode2();
            else switchToMode4();
        });
    });

    // Aplicar configuraci√≥n inicial:
    switchToMode2();
</script>